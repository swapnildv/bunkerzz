<div ng-show="!menu.showCreateForm" class="panel panel-primary">
    <div class="panel-heading">
        <strong>Menu</strong>
    </div>

    <table class="table table-condensed table-bordered">
        <tr>
            <th class="col-md-1">#</th>
            <th class="col-md-5">Name</th>
            <th class="col-md-2">IsActive</th>
            <th class="col-md-3"></th>
        </tr>
        <tbody ng-repeat-start="menuItem in menu.menus">
            <tr>
                <td class="col-md-1">
                    <button ng-click="menuItem.isCollapsed=!menuItem.isCollapsed" expand>
                        <span ng-bind="menuItem.isCollapsed ? '-' : '+'"></span>
                    </button>
                    <!-- <a ng-click="menu.isCollapsed=!menu.isCollapsed">collapse</a> -->
                </td>
                <td class="col-md-5">
                    <input ng-if="menuItem.menuEditMode" class="form-control" type="text" name="name" placeholder="Menu name" ng-model="menuItem.name">
                    <span ng-if="!menuItem.menuEditMode"> {{menuItem.name}}</span>
                </td>
                <td class="col-md-2">{{menuItem.isActive}}</td>
                <td class="col-md-3">
                    <button type="button" ng-show="!menuItem.menuEditMode" ng-click="menu.menuEdit(menuItem)" class="btn">Edit</button>
                    <button type="button" ng-show="menuItem.menuEditMode" ng-click="menu.menuUpdate(menuItem)" class="btn btn-success">Update</button>
                    <button type="button" ng-show="menuItem.menuEditMode" class="btn" ng-click="menu.cancelUpdate(menuItem)">Cancel</button>
                </td>
            </tr>
        </tbody>
        <tbody ng-repeat-end ng-show="menuItem.isCollapsed">
            <tr>
                <th>#</th>
                <th colspan="3">Submenu</th>

            </tr>
            <tr>
                <td></td>
                <td colspan="3">
                    <table class="table table-condensed table-bordered">
                        <tr>
                            <th class="col-md-6">Name</th>
                            <th class="col-md-3">Price</th>
                            <th class="col-md-3">IsActive</th>
                        </tr>
                        <tbody ng-repeat="submenu in menuItem.submenus">
                            <tr>
                                <td class="col-md-6">
                                    {{submenu.name}}
                                </td>
                                <td class="col-md-3"> {{submenu.price}}</td>
                                <td class="col-md-3">{{submenu.isActive}}</td>
                                <!-- <td>
                                    <button type="button" class="btn btn-primary">Edit</button>
                                </td> -->
                            </tr>
                        </tbody>

                        <!-- <ul>
                            <li ng-repeat="submenu in menu.submenus">
                                {{submenu.name}}
                            </li>
                        </ul> -->
                    </table>

                </td>
            </tr>
        </tbody>

    </table>
</div>

<button ng-show="!menu.showCreateForm" class="btn btn-primary" type="button" ng-click="menu.showCreateForm = true">Create New</button>

<div ng-show="menu.showCreateForm">
    <div class="page-header">
        <h1>Create menu</h1>
    </div>
    <form name="menuForm" ng-submit="menu.addmenu(menuData,menuForm.$valid);" novalidate>
        <div ng-class="{'has-success':(menuForm.name.$valid && !menuForm.name.$pristine),'has-error':(!menuForm.name.$valid && !menuForm.name.$pristine) || (!menuForm.name.$valid && menuForm.$submitted)}">
            <label>Name :</label>
            <input class="form-control" type="text" name="name" placeholder="Please enter name" ng-model="menu.menuData.name" ng-minlength="3"
                ng-maxlength="20" required>
            <p class="help-block" ng-show="(!menuForm.name.$pristine && menuForm.name.$error.required) || (menuForm.$submitted && menuForm.name.$error.required)">This field is required</p>
            <!-- <ul class="help-block" ng-show="(!menuForm.name.$pristine && menuForm.name.$error.pattern) || (!menuForm.name.$pristine &&  menuForm.name.$error.minlength) || (!menuForm.name.$pristine &&  menuForm.name.$error.maxlength)">
                <li>No special characters are allowed in Name field.</li>
                <li>Must not contain any numbers.</li>
                <li>Must be atleast 3 chracters but no more than 20.</li>
            </ul> -->
        </div>

        <div>
            <label>Submenu :</label>
            <input class="form-control" type="text" name="name" placeholder="Menu name" ng-model="menu.submenu.name">

            <input class="form-control" type="text" name="name" placeholder="Price" ng-model="menu.submenu.price">

            <button class="btn btn-primary" type="button" ng-click="menu.addSubmenu()">Add to list</button>
            <!-- <p class="help-block" ng-show="(!menuForm.name.$pristine && menuForm.name.$error.required) || (menuForm.$submitted && menuForm.name.$error.required)">This field is required</p> -->
            <!-- <ul class="help-block" ng-show="(!menuForm.name.$pristine && menuForm.name.$error.pattern) || (!menuForm.name.$pristine &&  menuForm.name.$error.minlength) || (!menuForm.name.$pristine &&  menuForm.name.$error.maxlength)">
                    <li>No special characters are allowed in Name field.</li>
                    <li>Must not contain any numbers.</li>
                    <li>Must be atleast 3 chracters but no more than 20.</li>
                </ul> -->

            <table ng-show="menu.submenus.length > 0">
                <tbody ng-repeat="sm in menu.submenus">
                    <tr>
                        <td class="col-md-8"> {{sm.name}}</td>
                        <td class="col-md-2">{{sm.price}}</td>
                        <td>
                            <button type="button" class="btn btn-primary">Edit</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <br>


        <button class="btn btn-primary" type="submit">Submit</button>
        <button class="btn btn-primary" type="button" ng-click="menu.showCreateForm = false">Cancel</button>
    </form>
</div>
<br>
<div class="jumbotron text-center" ng-show="menu.loading">
    <h4>
        <span class="glyphicon glyphicon-repeat spinner">
            Loading....
        </span>
    </h4>
</div>
<br>
<div class="row show-hide-message" ng-show="menu.succMsg">
    <div class="alert alert-success">{{menu.succMsg}}</div>
</div>
<br>

<div class="row show-hide-message" ng-show="menu.errMsg">
    <div class="alert alert-danger">{{menu.errMsg}}</div>
</div>